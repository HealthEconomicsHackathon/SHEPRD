---
output: md_document
---



<div id="deterministic-sensitivity-analysis" class="section level1">
<h1>Deterministic Sensitivity Analysis</h1>
<div id="package-heemod" class="section level2">
<h2>Package: heemod</h2>
<div id="maintained-by" class="section level3">
<h3>Maintained by</h3>
<p>Kevin Zarca - <a href="mailto:kevin.zarca@gmail.com" class="email">kevin.zarca@gmail.com</a> ( <a href="https://cran.r-project.org/web/packages/heemod/heemod.pdf" class="uri">https://cran.r-project.org/web/packages/heemod/heemod.pdf</a> and <a href="https://cran.r-project.org/web/packages/heemod/index.html" class="uri">https://cran.r-project.org/web/packages/heemod/index.html</a>)</p>
</div>
</div>
<div id="what-does-this-package-do" class="section level2">
<h2>What does this package do?</h2>
<p>For more information on the full package functionality – see “Markov Models” page under “State Transition Models”.
This page will focus on the deterministic sensitivity functions within the heemod package. This information is taken from the “Deterministic Sensitivity Analysis” Vignette (2019-10-22): <a href="https://cran.r-project.org/web/packages/heemod/vignettes/f_sensitivity.html" class="uri">https://cran.r-project.org/web/packages/heemod/vignettes/f_sensitivity.html</a>
This functionality reruns your Markov models with specified values for individual parameters.</p>
</div>
<div id="how-do-i-input-my-data-to-itwhat-inputs-does-it-take" class="section level2">
<h2>How do I input my data to it/what inputs does it take?</h2>
<p>Upper and lower values for the paramters are given to define_dsa().</p>
<pre class="r"><code>library(heemod)</code></pre>
<pre><code>## Warning: package &#39;heemod&#39; was built under R version 3.6.3</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;pryr&#39;:
##   method      from
##   print.bytes Rcpp</code></pre>
<pre class="r"><code>se &lt;- define_dsa(
  rr, .4, .6,
  cost_zido, 1500, 3000,
  cost_lami, 1500, 3000,  
  dr, .04, .08
)</code></pre>
<p>&amp; run the sensitivity analysis with run_dsa(), using res_mod is the model created [see <a href="https://cran.r-project.org/web/packages/heemod/heemod.pdf" class="uri">https://cran.r-project.org/web/packages/heemod/heemod.pdf</a> for how this would be structured]</p>
<pre class="r"><code># res_dsa &lt;- run_dsa(
#   model = res_mod,
#   dsa = se
# )
# Note code is ## to allow for inclusion without defining e.g. res_mod within this section</code></pre>
</div>
<div id="what-outputs-do-i-get" class="section level2">
<h2>What outputs do I get?</h2>
<p>Res_dsa is the output given from the above function, the example given in the vignette gives the following (cut down for space):</p>
<pre class="r"><code>## A sensitivity analysis on 4 parameters.
## 
## Parameters:
##   -rr
##   -cost_zido
##   -cost_lami
##   -dr
## 
## Sensitivity analysis:
## 
##                        cost_health cost_drugs cost_total life_year
## mono, cost_lami = 1500 46725886    19279596   48417031    8463.387
## comb, cost_lami = 1500 71019861    53642502   79593035   14198.651
## mono, cost_lami = 3000 46725886    19279596   48417031    8463.387
## comb, cost_lami = 3000 71019861    74940478   93812382   14198.651
## mono, cost_zido = 1500 46725886    12695081   43363208    8463.387
#The results of this can be then plotted into a tornado diagram using:
# plot(res_dsa,
#      strategy = &quot;mono&quot;,
#      result = &quot;cost&quot;,
#      type = &quot;simple&quot;)

# Although note that whatever you put under “strategy” and “result” is what would be plot, so in the above case it would be the different cost estimates for the mono strategy. If you want the different ICER values plotted this code would then be; 
# plot(res_dsa,
#      strategy = &quot;comb&quot;,
#      result = &quot;icer&quot;,
#      type = &quot;difference&quot;,
#      limits_by_bars = FALSE)</code></pre>
</div>
<div id="other-packages" class="section level2">
<h2>Other packages</h2>
<p>See below info</p>
</div>
<div id="other-helpful-resources" class="section level2">
<h2>Other helpful resources</h2>
<p>Alternatively, if you write your model using a different package or functions (i.e. not heemod). Turn that whole modelling process into a function (see: <a href="https://www.dummies.com/programming/r/how-to-move-from-a-script-to-a-function-in-r/" class="uri">https://www.dummies.com/programming/r/how-to-move-from-a-script-to-a-function-in-r/</a>)
…. that can then be run with different input values for your variables you are performing your deterministic sensitivity analyses on. For example;</p>
<pre class="r"><code>DSA.cost &lt;-  function(LCI.x, HCI.x) {
  #  LCI.x and HCI.x  higher and upper bounds for variable altering (cost of intervention)
  DSA &lt;- data.frame(c(&quot;low.x&quot;, &quot;high.x&quot;),0L)
  colnames(DSA) &lt;- c(&quot;variable&quot;,&quot;ICER&quot;)
  DSA[1,2] &lt;- analysis(c.ill, LCI.x)  
 # analysis is the functional version of your model c.ill  highlights the variable you are changing #and LCI.x is the value you are changing it to
  DSA[2,2] &lt;- analysis(c.ill, HCI.x)
  return(DSA)
}</code></pre>
</div>
</div>
